{
  "openapi": "3.1.0",
  "info": {
    "title": "OpenAPI definition",
    "version": "v0"
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Generated server url"
    }
  ],
  "tags": [
    {
      "name": "Country Controller",
      "description": "Endpoints for managing countries"
    },
    {
      "name": "Company Controller",
      "description": "Endpoints for managing companies"
    },
    {
      "name": "Currency Controller",
      "description": "Endpoints for managing currencies"
    },
    {
      "name": "Exchange Controller",
      "description": "Endpoints for managing exchanges"
    },
    {
      "name": "Industry Controller",
      "description": "Endpoints for managing industries"
    },
    {
      "name": "Sector Controller",
      "description": "Endpoints for managing sectors"
    },
    {
      "name": "Portfolio Controller",
      "description": "Portfolio overview, holdings and performance analytics"
    },
    {
      "name": "Transaction Controller",
      "description": "Endpoints for managing transactions"
    },
    {
      "name": "Asset Controller",
      "description": "Endpoints for managing assets"
    },
    {
      "name": "Staging Transaction Controller",
      "description": "Endpoints for managing staging transaction"
    }
  ],
  "paths": {
    "/staging-transaction": {
      "get": {
        "tags": [
          "Staging Transaction Controller"
        ],
        "summary": "Find all staging transactions",
        "description": "Return a paginated list of staging transactions filtered by optional parameters",
        "operationId": "findAllStagingTransactions",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          },
          {
            "name": "importStatus",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "VALIDATED",
                "FAILED",
                "IMPORTED"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Zero-based page index (0..N)",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "minimum": 0
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "The size of the page to be returned",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "minimum": 1
            }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.",
            "required": false,
            "schema": {
              "type": "array",
              "default": [
                "transactionDate,DESC"
              ],
              "items": {
                "type": "string"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of staging transactions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PageStagingTransactionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PageStagingTransactionResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Staging Transaction Controller"
        ],
        "summary": "Update staging transaction",
        "description": "Update a single staging transaction using DTO",
        "operationId": "updateStagingTransaction",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StagingTransactionEditRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Updated successfully"
          },
          "400": {
            "description": "Validation error"
          },
          "404": {
            "description": "Not found"
          }
        }
      },
      "post": {
        "tags": [
          "Staging Transaction Controller"
        ],
        "summary": "Import staging transactions (file upload)",
        "description": "Upload a file for a given platform to import staging transactions. Returns 201 Created on success.",
        "operationId": "importStagingTransactions",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Import accepted/created"
          },
          "400": {
            "description": "Bad request / validation error"
          },
          "415": {
            "description": "Unsupported media type"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/staging-transaction/status": {
      "put": {
        "tags": [
          "Staging Transaction Controller"
        ],
        "summary": "Bulk update staging transactions status",
        "description": "Bulk update status of multiple staging transactions (and related ones), expects list of UUIDs in body",
        "operationId": "bulkUpdateStagingTransactionStatus",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "string",
                  "format": "uuid"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Status updated"
          },
          "400": {
            "description": "Bad request"
          },
          "404": {
            "description": "One or more ids not found"
          }
        }
      }
    },
    "/transaction/copy": {
      "post": {
        "tags": [
          "Transaction Controller"
        ],
        "summary": "Copy validated staging transactions to transactions table",
        "description": "Copies all validated staging transactions into the main transactions table. Returns 204 No Content on success.",
        "operationId": "copyValidatedTransactions",
        "responses": {
          "204": {
            "description": "Copy successful"
          }
        }
      }
    },
    "/transaction": {
      "get": {
        "tags": [
          "Transaction Controller"
        ],
        "summary": "Find all transactions",
        "description": "Returns a paginated list of transactions",
        "operationId": "findAllTransactions",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Zero-based page index (0..N)",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "minimum": 0
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "The size of the page to be returned",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "minimum": 1
            }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.",
            "required": false,
            "schema": {
              "type": "array",
              "default": [
                "date,DESC"
              ],
              "items": {
                "type": "string"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of transactions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PageTransactionResponse"
                }
              }
            }
          }
        }
      }
    },
    "/transaction/last": {
      "get": {
        "tags": [
          "Transaction Controller"
        ],
        "summary": "Find last N transactions",
        "description": "Returns the last N transactions; defaults to 10 when n is not provided",
        "operationId": "findLastTransactions",
        "parameters": [
          {
            "name": "n",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of recent transactions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TransactionResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/staging-transaction/{id}": {
      "get": {
        "tags": [
          "Staging Transaction Controller"
        ],
        "summary": "Find staging transaction by id",
        "description": "Return a staging transactions filtered by id",
        "operationId": "findStagingTransactionById",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Staging transaction",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StagingTransactionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StagingTransactionResponse"
                }
              }
            }
          }
        }
      }
    },
    "/sector": {
      "get": {
        "tags": [
          "Sector Controller"
        ],
        "summary": "Find all sectors",
        "description": "Returns a list of sectors",
        "operationId": "findAllSectors",
        "responses": {
          "200": {
            "description": "List of sectors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SectorResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/summary": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get portfolio summary",
        "description": "Returns aggregated portfolio statistics including total value, returns, and changes",
        "operationId": "getPortfolioSummary",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved portfolio summary",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioSummaryResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/portfolio/performers": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get top and bottom performers",
        "description": "Returns top and bottom performing assets with their percentage change",
        "operationId": "getTopBottomPerformers",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 5,
              "minimum": 1
            }
          },
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved performers",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TopBottomPerformersResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid limit parameter",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TopBottomPerformersResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/performance-data": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get combined performance data",
        "description": "Returns the portfolio chart series and monthly invested amounts together",
        "operationId": "getPortfolioPerformanceData",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "months",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved performance data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioPerformanceResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioPerformanceResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/monthly-invested": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get monthly invested amounts",
        "description": "Returns invested euros per month for the last N months",
        "operationId": "getMonthlyInvested",
        "parameters": [
          {
            "name": "months",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved monthly invested amounts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MonthlyInvestedResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/monthly-dividends": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get monthly dividends",
        "description": "Returns dividends per month for the last N months (null = entire history)",
        "operationId": "getMonthlyDividends",
        "parameters": [
          {
            "name": "months",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved monthly dividends"
          }
        }
      }
    },
    "/portfolio/holdings": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get current portfolio holdings",
        "description": "Returns a list of all current portfolio positions with detailed information.",
        "operationId": "getHoldings",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved holdings list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssetHoldingResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/portfolio/holdings/summary": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get active positions summary",
        "description": "Returns active positions with invested amount, invested %, P/L (EUR and %), market value and market value %",
        "operationId": "getActivePositions",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved positions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActivePositionResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/portfolio/dividend-cost-yield": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get dividend cost yield",
        "description": "Returns dividend cost yield for each asset and total portfolio. Yield is calculated as (Annualized Dividend / Cost Basis) * 100, annualized from first purchase date.",
        "operationId": "getDividendCostYield",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved dividend cost yield",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DividendCostYieldResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/portfolio/consolidated-holdings": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get consolidated portfolio holdings by company or ETF",
        "description": "Returns a list of all current portfolio positions grouped by company or ETF with profit/loss and dividend yield.",
        "operationId": "getConsolidatedHoldings",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved consolidated holdings list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CompanyAssetHoldingResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/portfolio/concentration": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get portfolio concentration and HHI",
        "description": "Returns top1/top3/top5/top10 concentration percentages and Herfindahlâ€“Hirschman Index (HHI)",
        "operationId": "getPortfolioConcentration",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved concentration metrics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioConcentrationResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/portfolio/chart/performance": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get portfolio value time series",
        "description": "Returns daily market value and invested amount for the specified time period, optionally including benchmark indices",
        "operationId": "getPortfolioPerformanceChart",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved value series",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioChartResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid days parameter",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioChartResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/allocation": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get combined allocation",
        "description": "Returns allocations by currency, industry/sector and country together",
        "operationId": "getCombinedAllocation",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved allocation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioAllocationResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/allocation/industry-sector": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get portfolio allocation by industry and sector",
        "description": "Returns aggregated market value grouped by industry and sector for the latest snapshot",
        "operationId": "getIndustrySectorAllocation",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved allocation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IndustrySectorValueResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/allocation/currency": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get portfolio exposure by currency",
        "description": "Returns aggregated market value grouped by asset currency for the latest snapshot",
        "operationId": "getCurrencyExposure",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved exposure",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrencyValueResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/allocation/country": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get portfolio allocation by country",
        "description": "Returns aggregated market value grouped by company country for the latest snapshot",
        "operationId": "getCountryAllocation",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved allocation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CountryValueResponse"
                }
              }
            }
          }
        }
      }
    },
    "/portfolio/allocation/asset-type": {
      "get": {
        "tags": [
          "Portfolio Controller"
        ],
        "summary": "Get portfolio allocation by asset type",
        "description": "Returns aggregated market value grouped by asset type for the latest snapshot",
        "operationId": "getAssetTypeAllocation",
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "TRADING212",
                "ETORO",
                "IBKR",
                "REVOLUT"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved allocation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssetTypeValueResponse"
                }
              }
            }
          }
        }
      }
    },
    "/industry": {
      "get": {
        "tags": [
          "Industry Controller"
        ],
        "summary": "Find all industries",
        "description": "Returns a list of industries",
        "operationId": "findAllIndustries",
        "responses": {
          "200": {
            "description": "List of industries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/IndustryResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/exchange": {
      "get": {
        "tags": [
          "Exchange Controller"
        ],
        "summary": "Find all exchanges",
        "description": "Returns a list of exchanges",
        "operationId": "findAllExchanges",
        "responses": {
          "200": {
            "description": "List of exchanges",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ExchangeResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/currency": {
      "get": {
        "tags": [
          "Currency Controller"
        ],
        "summary": "Find all currencies",
        "description": "Returns a list of currencies",
        "operationId": "findAllCurrencies",
        "responses": {
          "200": {
            "description": "List of currencies",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CurrencyResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/country": {
      "get": {
        "tags": [
          "Country Controller"
        ],
        "summary": "Find all countries",
        "description": "Returns a list of countries",
        "operationId": "findAllCountries",
        "responses": {
          "200": {
            "description": "List of countries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CountryResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/company": {
      "get": {
        "tags": [
          "Company Controller"
        ],
        "summary": "Find all companies",
        "description": "Returns a list of companies",
        "operationId": "findAllCompanies",
        "responses": {
          "200": {
            "description": "List of companies",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CompanyResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/asset": {
      "get": {
        "tags": [
          "Asset Controller"
        ],
        "summary": "Find all assets",
        "description": "Returns a paginated list of assets filtered by optional parameters",
        "operationId": "findAllAssets",
        "parameters": [
          {
            "name": "symbol",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "exchange",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "company",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Zero-based page index (0..N)",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "minimum": 0
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "The size of the page to be returned",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 25,
              "minimum": 1
            }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of assets",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PageAssetResponse"
                }
              }
            }
          }
        }
      }
    },
    "/asset/list": {
      "get": {
        "tags": [
          "Asset Controller"
        ],
        "summary": "Find all assets",
        "description": "Returns a list of assets.",
        "operationId": "findAllAssetsAsList",
        "responses": {
          "200": {
            "description": "List of assets",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AssetResponse"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "StagingTransactionEditRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "quantity": {
            "type": "number",
            "format": "double"
          },
          "price": {
            "type": "number",
            "format": "double"
          },
          "asset": {
            "type": "string",
            "format": "uuid"
          },
          "amount": {
            "type": "number",
            "format": "double"
          },
          "grossAmount": {
            "type": "number",
            "format": "double"
          },
          "taxPercentage": {
            "type": "number",
            "format": "double"
          },
          "taxAmount": {
            "type": "number",
            "format": "double"
          }
        },
        "required": [
          "asset",
          "id"
        ]
      },
      "AssetAliasResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "platform": {
            "type": "string",
            "enum": [
              "TRADING212",
              "ETORO",
              "IBKR",
              "REVOLUT"
            ]
          },
          "symbol": {
            "type": "string"
          }
        }
      },
      "AssetResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "type": {
            "type": "string",
            "enum": [
              "STOCK",
              "ETF",
              "INDEX"
            ]
          },
          "symbol": {
            "type": "string"
          },
          "company": {
            "$ref": "#/components/schemas/CompanyResponse"
          },
          "currency": {
            "type": "string"
          },
          "exchange": {
            "$ref": "#/components/schemas/ExchangeResponse"
          },
          "aliases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AssetAliasResponse"
            }
          }
        }
      },
      "CompanyResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "country": {
            "$ref": "#/components/schemas/CountryResponse"
          },
          "industry": {
            "$ref": "#/components/schemas/IndustryResponse"
          }
        }
      },
      "CountryResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "CurrencyResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "symbol": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "parent": {
            "$ref": "#/components/schemas/CurrencySimpleResponse"
          },
          "parentFactor": {
            "type": "number"
          }
        }
      },
      "CurrencySimpleResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "symbol": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "ExchangeResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "mic": {
            "type": "string"
          },
          "symbol": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "country": {
            "$ref": "#/components/schemas/CountryResponse"
          }
        }
      },
      "IndustryResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "sector": {
            "$ref": "#/components/schemas/SectorSimpleResponse"
          }
        }
      },
      "PageTransactionResponse": {
        "type": "object",
        "properties": {
          "totalPages": {
            "type": "integer",
            "format": "int32"
          },
          "totalElements": {
            "type": "integer",
            "format": "int64"
          },
          "size": {
            "type": "integer",
            "format": "int32"
          },
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TransactionResponse"
            }
          },
          "number": {
            "type": "integer",
            "format": "int32"
          },
          "sort": {
            "$ref": "#/components/schemas/SortObject"
          },
          "pageable": {
            "$ref": "#/components/schemas/PageableObject"
          },
          "numberOfElements": {
            "type": "integer",
            "format": "int32"
          },
          "first": {
            "type": "boolean"
          },
          "last": {
            "type": "boolean"
          },
          "empty": {
            "type": "boolean"
          }
        }
      },
      "PageableObject": {
        "type": "object",
        "properties": {
          "offset": {
            "type": "integer",
            "format": "int64"
          },
          "sort": {
            "$ref": "#/components/schemas/SortObject"
          },
          "paged": {
            "type": "boolean"
          },
          "pageNumber": {
            "type": "integer",
            "format": "int32"
          },
          "pageSize": {
            "type": "integer",
            "format": "int32"
          },
          "unpaged": {
            "type": "boolean"
          }
        }
      },
      "SectorSimpleResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "SortObject": {
        "type": "object",
        "properties": {
          "empty": {
            "type": "boolean"
          },
          "sorted": {
            "type": "boolean"
          },
          "unsorted": {
            "type": "boolean"
          }
        }
      },
      "TransactionResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "transactionType": {
            "type": "string",
            "enum": [
              "BUY",
              "FEE",
              "SELL",
              "DEPOSIT",
              "WITHDRAWAL",
              "DIVIDEND",
              "DIVIDEND_ADJUSTMENT",
              "UNKNOWN"
            ]
          },
          "platform": {
            "type": "string",
            "enum": [
              "TRADING212",
              "ETORO",
              "IBKR",
              "REVOLUT"
            ]
          },
          "date": {
            "type": "string",
            "format": "date-time"
          },
          "currency": {
            "$ref": "#/components/schemas/CurrencyResponse"
          },
          "asset": {
            "$ref": "#/components/schemas/AssetResponse"
          },
          "quantity": {
            "type": "number"
          },
          "price": {
            "type": "number"
          },
          "amount": {
            "type": "number"
          },
          "relatedTransactionId": {
            "type": "string",
            "format": "uuid"
          },
          "grossAmount": {
            "type": "number"
          },
          "taxAmount": {
            "type": "number"
          },
          "taxPercentage": {
            "type": "number"
          }
        }
      },
      "PageStagingTransactionResponse": {
        "type": "object",
        "properties": {
          "totalPages": {
            "type": "integer",
            "format": "int32"
          },
          "totalElements": {
            "type": "integer",
            "format": "int64"
          },
          "size": {
            "type": "integer",
            "format": "int32"
          },
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StagingTransactionResponse"
            }
          },
          "number": {
            "type": "integer",
            "format": "int32"
          },
          "sort": {
            "$ref": "#/components/schemas/SortObject"
          },
          "pageable": {
            "$ref": "#/components/schemas/PageableObject"
          },
          "numberOfElements": {
            "type": "integer",
            "format": "int32"
          },
          "first": {
            "type": "boolean"
          },
          "last": {
            "type": "boolean"
          },
          "empty": {
            "type": "boolean"
          }
        }
      },
      "StagingTransactionResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "platform": {
            "type": "string",
            "enum": [
              "TRADING212",
              "ETORO",
              "IBKR",
              "REVOLUT"
            ]
          },
          "date": {
            "type": "string",
            "format": "date-time"
          },
          "type": {
            "type": "string",
            "enum": [
              "BUY",
              "FEE",
              "SELL",
              "DEPOSIT",
              "WITHDRAWAL",
              "DIVIDEND",
              "DIVIDEND_ADJUSTMENT",
              "UNKNOWN"
            ]
          },
          "symbol": {
            "type": "string"
          },
          "quantity": {
            "type": "number",
            "format": "double"
          },
          "price": {
            "type": "number",
            "format": "double"
          },
          "amount": {
            "type": "number",
            "format": "double"
          },
          "resolvedAsset": {
            "$ref": "#/components/schemas/AssetResponse"
          },
          "importStatus": {
            "type": "string",
            "enum": [
              "PENDING",
              "VALIDATED",
              "FAILED",
              "IMPORTED"
            ]
          }
        }
      },
      "IndustrySimpleResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "SectorResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "industries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IndustrySimpleResponse"
            }
          }
        }
      },
      "PeriodChangeResponse": {
        "type": "object",
        "description": "Change information for a specific period",
        "properties": {
          "startDate": {
            "type": "string",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "format": "date"
          },
          "periodDays": {
            "type": "integer",
            "format": "int32"
          },
          "changeAmount": {
            "type": "number"
          },
          "changePercentage": {
            "type": "number"
          },
          "periodLabel": {
            "type": "string"
          }
        }
      },
      "PortfolioSummaryResponse": {
        "type": "object",
        "description": "Portfolio summary with total value and returns",
        "properties": {
          "snapshotDate": {
            "type": "string",
            "format": "date"
          },
          "totalValue": {
            "type": "number"
          },
          "totalInvested": {
            "type": "number"
          },
          "totalReturn": {
            "type": "number"
          },
          "totalReturnPercentage": {
            "type": "number"
          },
          "totalUnrealizedPL": {
            "type": "number"
          },
          "totalRealizedPL": {
            "type": "number"
          },
          "totalHoldings": {
            "type": "integer",
            "format": "int32"
          },
          "totalDividends": {
            "type": "number"
          },
          "dividendCostYield": {
            "type": "number"
          },
          "periodChange": {
            "$ref": "#/components/schemas/PeriodChangeResponse"
          }
        }
      },
      "AssetSimpleResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "symbol": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "STOCK",
              "ETF",
              "INDEX"
            ]
          }
        }
      },
      "PerformerResponse": {
        "type": "object",
        "properties": {
          "asset": {
            "$ref": "#/components/schemas/AssetSimpleResponse"
          },
          "percentageChange": {
            "type": "number"
          }
        }
      },
      "TopBottomPerformersResponse": {
        "type": "object",
        "properties": {
          "top": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PerformerResponse"
            }
          },
          "bottom": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PerformerResponse"
            }
          }
        }
      },
      "MonthlyInvestedEntry": {
        "type": "object",
        "properties": {
          "yearMonth": {
            "type": "string"
          },
          "invested": {
            "type": "number"
          }
        }
      },
      "MonthlyInvestedResponse": {
        "type": "object",
        "properties": {
          "series": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MonthlyInvestedEntry"
            }
          }
        }
      },
      "PortfolioChartResponse": {
        "type": "object",
        "properties": {
          "dates": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "date"
            }
          },
          "invested": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            }
          },
          "marketValue": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            }
          },
          "plPercentage": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            }
          },
          "indices": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "number",
                "format": "double"
              }
            }
          }
        }
      },
      "PortfolioPerformanceResponse": {
        "type": "object",
        "properties": {
          "chart": {
            "$ref": "#/components/schemas/PortfolioChartResponse"
          },
          "monthlyInvested": {
            "$ref": "#/components/schemas/MonthlyInvestedResponse"
          }
        }
      },
      "AssetHoldingResponse": {
        "type": "object",
        "description": "Individual stock/etf holding details",
        "properties": {
          "platform": {
            "type": "string",
            "enum": [
              "TRADING212",
              "ETORO",
              "IBKR",
              "REVOLUT"
            ]
          },
          "type": {
            "type": "string",
            "enum": [
              "STOCK",
              "ETF",
              "INDEX"
            ]
          },
          "ticker": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "shares": {
            "type": "number"
          },
          "avgPrice": {
            "type": "number"
          },
          "currentPrice": {
            "type": "number"
          },
          "profitLoss": {
            "type": "number"
          },
          "profitLossPercentage": {
            "type": "number"
          },
          "portfolioPercentage": {
            "type": "number"
          },
          "dividendCostYield": {
            "type": "number"
          }
        }
      },
      "ActivePositionResponse": {
        "type": "object",
        "description": "Active portfolio position with invested/market values and P/L",
        "properties": {
          "platform": {
            "type": "string",
            "enum": [
              "TRADING212",
              "ETORO",
              "IBKR",
              "REVOLUT"
            ]
          },
          "type": {
            "type": "string",
            "enum": [
              "STOCK",
              "ETF",
              "INDEX"
            ]
          },
          "ticker": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "shares": {
            "type": "number"
          },
          "avgPriceEur": {
            "type": "number"
          },
          "investedEur": {
            "type": "number"
          },
          "investedPercentage": {
            "type": "number"
          },
          "profitLossEur": {
            "type": "number"
          },
          "profitLossPercentage": {
            "type": "number"
          },
          "marketValueEur": {
            "type": "number"
          },
          "marketValuePercentage": {
            "type": "number"
          }
        }
      },
      "AssetDividendCostYieldResponse": {
        "type": "object",
        "properties": {
          "assetId": {
            "type": "string",
            "format": "uuid"
          },
          "ticker": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "totalDividendEur": {
            "type": "number"
          },
          "annualizedDividendEur": {
            "type": "number"
          },
          "costBasisEur": {
            "type": "number"
          },
          "daysHeld": {
            "type": "integer",
            "format": "int32"
          },
          "dividendCostYield": {
            "type": "number"
          }
        }
      },
      "DividendCostYieldResponse": {
        "type": "object",
        "properties": {
          "assets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AssetDividendCostYieldResponse"
            }
          },
          "total": {
            "$ref": "#/components/schemas/TotalDividendCostYieldResponse"
          }
        }
      },
      "TotalDividendCostYieldResponse": {
        "type": "object",
        "properties": {
          "totalDividendEur": {
            "type": "number"
          },
          "annualizedDividendEur": {
            "type": "number"
          },
          "totalCostBasisEur": {
            "type": "number"
          },
          "daysHeld": {
            "type": "integer",
            "format": "int32"
          },
          "dividendCostYield": {
            "type": "number"
          }
        }
      },
      "CompanyAssetHoldingResponse": {
        "type": "object",
        "description": "Individual company/etf holding details",
        "properties": {
          "platform": {
            "type": "string",
            "enum": [
              "TRADING212",
              "ETORO",
              "IBKR",
              "REVOLUT"
            ]
          },
          "tickers": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "name": {
            "type": "string"
          },
          "profitLoss": {
            "type": "number"
          },
          "profitLossPercentage": {
            "type": "number"
          },
          "portfolioPercentage": {
            "type": "number"
          },
          "dividendCostYield": {
            "type": "number"
          }
        }
      },
      "PortfolioConcentrationResponse": {
        "type": "object",
        "description": "Portfolio concentration metrics and HHI",
        "properties": {
          "top1": {
            "type": "number"
          },
          "top3": {
            "type": "number"
          },
          "top5": {
            "type": "number"
          },
          "top10": {
            "type": "number"
          },
          "hhi": {
            "type": "number"
          }
        }
      },
      "AssetTypeValueResponse": {
        "type": "object",
        "properties": {
          "assetType": {
            "type": "string"
          },
          "valueEur": {
            "type": "number"
          }
        }
      },
      "CountryValueResponse": {
        "type": "object",
        "properties": {
          "country": {
            "type": "string"
          },
          "valueEur": {
            "type": "number"
          }
        }
      },
      "CurrencyValueResponse": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string"
          },
          "valueEur": {
            "type": "number"
          }
        }
      },
      "IndustrySectorValueResponse": {
        "type": "object",
        "properties": {
          "industry": {
            "type": "string"
          },
          "sector": {
            "type": "string"
          },
          "valueEur": {
            "type": "number"
          }
        }
      },
      "PortfolioAllocationResponse": {
        "type": "object",
        "properties": {
          "byCurrency": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CurrencyValueResponse"
            }
          },
          "byIndustrySector": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IndustrySectorValueResponse"
            }
          },
          "byCountry": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CountryValueResponse"
            }
          },
          "byAssetType": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AssetTypeValueResponse"
            }
          }
        }
      },
      "PageAssetResponse": {
        "type": "object",
        "properties": {
          "totalPages": {
            "type": "integer",
            "format": "int32"
          },
          "totalElements": {
            "type": "integer",
            "format": "int64"
          },
          "size": {
            "type": "integer",
            "format": "int32"
          },
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AssetResponse"
            }
          },
          "number": {
            "type": "integer",
            "format": "int32"
          },
          "sort": {
            "$ref": "#/components/schemas/SortObject"
          },
          "pageable": {
            "$ref": "#/components/schemas/PageableObject"
          },
          "numberOfElements": {
            "type": "integer",
            "format": "int32"
          },
          "first": {
            "type": "boolean"
          },
          "last": {
            "type": "boolean"
          },
          "empty": {
            "type": "boolean"
          }
        }
      }
    }
  }
}
